!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){var t={};function n(r){if(t[r])return t[r].exports;var u=t[r]={i:r,l:!1,exports:{}};return e[r].call(u.exports,u,u.exports,n),u.l=!0,u.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n.w={},n(n.s=7)}([function(e,t){e.exports=require("source-map-support/register")},function(e,t){e.exports=require("babel-runtime/core-js/json/stringify")},function(e,t){e.exports=require("rsmq-promise")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,u=n(1),s=(r=u)&&r.__esModule?r:{default:r};function o(e,t){return{statusCode:e,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":!0},body:(0,s.default)(t)}}t.success=function(e){return o(200,e)},t.failure=function(e){return o(500,e)},n(0)},function(e,t){e.exports=require("babel-runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("babel-runtime/core-js/promise")},function(e,t){e.exports=require("babel-runtime/regenerator")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInfo=t.deleteMessage=t.receiveMessage=t.sendMessage=t.listQueues=t.init=void 0;var r,u,s,o,a,c,l=v(n(1)),i=v(n(6)),f=v(n(5)),p=v(n(4));t.init=(r=(0,p.default)(i.default.mark(function e(t,n,r){var u,s,o,a,c,l;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(){return new f.default(function(e,t){u.createQueue({qname:o,vt:a}).then(function(t){e("queue created")}).catch(function(e){console.log(e)})})},n.callbackWaitsForEmptyEventLoop=!1,u=new h(g),s=JSON.parse(t.body),o=s.name,a=s.vt,e.prev=6,e.next=9,c();case 9:l=e.sent,r(null,l?(0,d.success)(l):(0,d.failure)({status:!1,error:"queue not created."})),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(6),console.log(e.t0),r(null,(0,d.failure)({status:!1}));case 17:case"end":return e.stop()}},e,this,[[6,13]])})),function(e,t,n){return r.apply(this,arguments)}),t.listQueues=(u=(0,p.default)(i.default.mark(function e(t,n,r){var u,s,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(){return new f.default(function(e,t){u.listQueues().then(function(t){e(t)}).catch(function(e){console.log(e)})})},n.callbackWaitsForEmptyEventLoop=!1,u=new h(g),e.prev=3,e.next=6,s();case 6:o=e.sent,r(null,o?(0,d.success)(o):(0,d.failure)({status:!1,error:"queues not found."})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0),r(null,(0,d.failure)({status:!1}));case 14:case"end":return e.stop()}},e,this,[[3,10]])})),function(e,t,n){return u.apply(this,arguments)}),t.sendMessage=(s=(0,p.default)(i.default.mark(function e(t,n,r){var u,s,o,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){return new f.default(function(e,t){u.sendMessage({qname:"myqueue",message:s}).then(function(t){console.log("Message sent. ID:",t),e(t)}).catch(function(e){console.log(e)})})},n.callbackWaitsForEmptyEventLoop=!1,u=new h(g),s=(0,l.default)(t.body),e.prev=4,e.next=7,o();case 7:a=e.sent,console.log("message sent, heres the id:",a),r(null,a?(0,d.success)(a):(0,d.failure)({status:!1,error:"message id not returned"})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0),r(null,(0,d.failure)({status:!1}));case 16:case"end":return e.stop()}},e,this,[[4,12]])})),function(e,t,n){return s.apply(this,arguments)}),t.receiveMessage=(o=(0,p.default)(i.default.mark(function e(t,n,r){var u,s,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(){return new f.default(function(e,t){u.receiveMessage({qname:"myqueue"}).then(function(t){console.log("Received message with ID: ",t.id),e(t)}).catch(function(e){console.log(e)})})},n.callbackWaitsForEmptyEventLoop=!1,u=new h(g),e.prev=3,e.next=6,s();case 6:o=e.sent,r(null,o?(0,d.success)(o):(0,d.failure)({status:!1,error:"message not received"})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0),r(null,(0,d.failure)({status:!1}));case 14:case"end":return e.stop()}},e,this,[[3,10]])})),function(e,t,n){return o.apply(this,arguments)}),t.deleteMessage=(a=(0,p.default)(i.default.mark(function e(t,n,r){var u,s,o,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){return new f.default(function(e,t){u.deleteMessage({qname:"myqueue",id:s}).then(function(t){console.log("1 - deleted; 2 - not deleted",t),e(t)}).catch(function(e){console.log(e)})})},n.callbackWaitsForEmptyEventLoop=!1,u=new h({rsmqOptions:g}),s=JSON.parse(t.body),console.log(s),e.prev=5,e.next=8,o();case 8:a=e.sent,r(null,a?(0,d.success)(a):(0,d.failure)({status:!1,error:"message not deleted"})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),console.log(e.t0),r(null,(0,d.failure)({status:!1}));case 16:case"end":return e.stop()}},e,this,[[5,12]])})),function(e,t,n){return a.apply(this,arguments)}),t.getInfo=(c=(0,p.default)(i.default.mark(function e(t,n,r){var u,s,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(){return new f.default(function(e,t){u.getQueueAttributes({qname:"myqueue"}).then(function(t){console.log("Info Received",t),e(t)}).catch(function(e){console.log(e),r(e)})})},n.callbackWaitsForEmptyEventLoop=!1,u=new h(g),e.prev=3,e.next=6,s();case 6:o=e.sent,console.log("heres the info about myqueue",o),o&&r(null,(0,d.success)(o)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0),r(null,(0,d.failure)({status:!1}));case 15:case"end":return e.stop()}},e,this,[[3,11]])})),function(e,t,n){return c.apply(this,arguments)});n(0);var d=n(3);function v(e){return e&&e.__esModule?e:{default:e}}var h=n(2),g={host:process.env.REDIS_HOST,port:process.env.REDIS_PORT,ns:"rsmq"}}]));